# LAB 04.01
##### Họ và tên: Nguyễn Minh Thành - MSSV: 25521710

---

## Đề bài
VCT Tính khoảng thời gian **t** giữa hai thời điểm **t1**, **t2** :

* **(a)**  
	- **t1, t2** là 2 thời điểm trong ngày;  
	- Mỗi thời điểm bao gồm **3 thông tin:** giờ, phút, và giây;  
	- **t** là số giây.  

* **(b)**  
	- Tương tự câu a/ nhưng **t1** là thời điểm trước và **t2** là thời điểm sau;  
	- Nếu **t2 < t1** thì **t2** thuộc ngày hôm sau.  
		> Ví dụ: t1 = 23:59:00 và t2 = 00:01:00  
		> → t = 2 * 60 = **120 giây**

* **(c)**  
	- **t1, t2** là 2 thời điểm trong năm;  
	- Mỗi thời điểm bao gồm **3 thông tin:** ngày, tháng, và năm;  
	- **t** là số ngày.  
	- Kết hợp với 1 mốc cụ thể, xác định **thứ** của t1, t2.  
		> Ví dụ:  
		> t1 = 20/10/2025 và t2 = 11/11/2025 ⇒ t = 22  
		> Nếu biết 01/11/2019 là **thứ Sáu**, thì:  
		> - t1 là **Chủ nhật**  
		> - t2 là **thứ Hai**

* **(d)**  
	- **t1** là ngày hôm nay (dùng hàm có sẵn để lấy – lấy luôn thứ của ngày này);  
	- **t2** là 1 ngày cách hôm nay không quá 100 năm;  
	- Xác định thêm **thứ của t2**.  
		> Ví dụ:  
		> t1 = 10/10/25 và là **thứ Sáu**  
		> t2 = 11/11/11 thì cũng là **thứ Sáu!**


## Thuật toán
- Thực hiện tính khoảng cách giữa 2 thời điểm theo giây (ý (a) và (b)):
    
    - Với ý (a), ta thực hiện sắp xếp lại thời gian sao cho t1 là thời điểm trước t2. Sau đó lần lượt tính số giây từ thời điểm "0 giờ 0 phút 0 giây" tới `t1` và `t2` (đặt là `total1` và `total2`). Khoảng cách giữa 2 thời điểm là `abs(total2 - total1)`.
    - Với ý (b), thực hiện tương tự như ý (a). Nhưng do t1 và t2 ở 2 ngày khác nhau (t1 ở ngày trước, t2 ở ngày sau), ta chia thành 2 khung giờ để tính khoảng cách: từ t1 đến 23 giờ 59 phút 59 giây, và từ 0 giờ 0 phút 0 giây tới t2. Đáp án là tổng số giây của 2 khung giờ đó cộng 1 (từ 23 giờ 59 phút 59 giây tới 0 giờ 0 phút 0 giây tính là 1 giây).
    - Với ý (c):
        - a thực hiện tính số ngày như sau: khởi tạo total_days = 0; cộng số ngày của các năm giữa t1 và t2 (366 nếu năm nhuận, 365 nếu thường); cộng số ngày từ đầu năm t2 đến t2; trừ số ngày từ đầu năm t1 đến t1; kết quả còn lại là tổng số ngày chênh lệch giữa hai thời điểm.
        - Về cách xác định ngày trong tuần, trước hết tính số ngày chênh lệch `total_days = countDays(root, t)`, sau đó trả về `(total_days % 7 + 1) % 7` để xác định thứ trong tuần của t.
    - Với ý (d), ý tưởng tương tự (c) về cách xác định thứ trong tuần.

## Source Code
- Với 2 ý (a), (b):
```c++
#include <bits/stdc++.h>
using namespace std;

#define JUDGE(name) if (fopen(name".inp", "r")) { freopen(name".inp","r",stdin); freopen(name".out","w",stdout); }
const int MAXN = 1e5+5;

// declare variables here
struct Time {
    int hour, min, sec;
};

struct input {
    int getHour () {
        int n;
        int low = 0, high = 23;
        do {
            cout << "Nhap so gio trong khoang [" << low << ", " << high << "]: ";
            cin >> n;
        } while (n < low || n > high);
        return n;
    }

    int getMinute () {
        int n;
        int low = 0, high = 59;
        do {
            cout << "Nhap so phut trong khoang [" << low << ", " << high << "]: ";
            cin >> n;
        } while (n < low || n > high);
        return n;
    }

    int getSecond () {
        int n;
        int low = 0, high = 59;
        do {
            cout << "Nhap so giay trong khoang [" << low << ", " << high << "]: ";
            cin >> n;
        } while (n < low || n > high);
        return n;
    }
} getData;

// Hàm kiểm tra tính hợp lệ của thời gian
bool isValidTime (Time t) {
    if (t.hour < 0 || t.hour > 23) return 0;
    if (t.min < 0 || t.min > 59) return 0;
    if (t.sec < 0 || t.sec > 59) return 0;
    return 1;
}

// Hàm sắp xếp thời gian theo thứ tự tăng dần (t1 trước t2)
void sortTime (Time& t1, Time& t2) {
    if (t1.hour > t2.hour) swap(t1, t2);
    else if (t1.hour == t2.hour) {
        if (t1.min > t2.min) swap(t1, t2);
        else if (t1.min == t2.min) {
            if (t1.sec > t2.sec) swap(t1, t2);
        }
    }
}

// Hàm tính số giây giữa hai thời điểm
int countSec (Time t1, Time t2) {
    int total1 = t1.hour * 3600 + t1.min * 60 + t1.sec;
    int total2 = t2.hour * 3600 + t2.min * 60 + t2.sec;
    return abs(total2 - total1);
}

bool checkTime (Time t1, Time t2) {
    if (t1.hour < t2.hour) return true;
    else if (t1.hour == t2.hour) {
        if (t1.min < t2.min) return true;
        else if (t1.min == t2.min) {
            if (t1.sec < t2.sec) return true;
        }
    }
    return false;
}

int main () {
    // Get input
    Time time_1, time_2;
    do {
        cout << "Nhap thoi gian thu nhat:" << endl;
        time_1.hour = getData.getHour();
        time_1.min = getData.getMinute();
        time_1.sec = getData.getSecond();
    } while (!isValidTime(time_1));
    cout << endl;
    do {
        cout << "Nhap thoi gian thu hai:" << endl;
        time_2.hour = getData.getHour();
        time_2.min = getData.getMinute();
        time_2.sec = getData.getSecond();
    } while (!isValidTime(time_2));

    // (a) Tính khoảng cách giữa 2 thời điểm t1 và t2 theo giây
    int diff = countSec(time_1, time_2);
    cout << "So giay giua " << time_1.hour << ":" << time_1.min << ":" << time_1.sec << " va " << time_2.hour << ":" << time_2.min << ":" << time_2.sec << " la: " << diff << " giay." << endl;

    // (b) Tính khoảng cách theo giây với t1 là thời điểm trước và t2 là thời điểm sau; nếu t2 < t1 thì t2 thuộc ngày hôm sau.
    if (!checkTime(time_1, time_2)) {
        Time new_day = {0,0,0}, pre_midnight = {23,59,59};
        int sec_to_midnight = countSec(time_1, pre_midnight); // time_1 --> 23:59:59
        int sec_to_midnight2 = countSec(new_day, time_2); // 00:00:00 --> time_2
        int total_sec = sec_to_midnight + 1 + sec_to_midnight2;
        cout << "So giay giua " << time_1.hour << ":" << time_1.min << ":" << time_1.sec << " va " << time_2.hour << ":" << time_2.min << ":" << time_2.sec << " (voi t1 la ngay hom truoc, t2 la ngay hom sau) la: " << total_sec << " giay." << endl;
    } else cout << "So giay giua " << time_1.hour << ":" << time_1.min << ":" << time_1.sec << " va " << time_2.hour << ":" << time_2.min << ":" << time_2.sec << " la: " << diff << " giay." << endl;

}
```

- Với ý (c):
```c++
#include <bits/stdc++.h>
using namespace std;

#define JUDGE(name) if (fopen(name".inp", "r")) { freopen(name".inp","r",stdin); freopen(name".out","w",stdout); }
const int MAXN = 1e5+5;

/* This is the declaration of constants */
const int numDaysInMonth[] = {-1, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
const string DayName[] = {"Thu bay", "Chu Nhat", "Thu Hai", "Thu Ba", "Thu Tu", "Thu Nam", "Thu Sau"};
/*
    0 : "Saturday",
    1 : "Sunday",
    2 : "Monday",
    3 : "Tuesday",
    4 : "Wednesday",
    5 : "Thursday",
    6 : "Friday",
*/

/* This is the definition of the Time structure */
struct Time {
    int day, month, year, dayOfWeek;
};

const Time root_time = {1, 1, 2000, 0}; // Saturday

struct input {
    int getDay () {
        int n;
        int low = 1, high = 31;
        do {
            cout << "Nhap so ngay trong khoang [" << low << ", " << high << "]: ";
            cin >> n;
        } while (n < low || n > high);
        return n;
    }

    int getMonth () {
        int n;
        int low = 1, high = 12;
        do {
            cout << "Nhap so thang trong khoang [" << low << ", " << high << "]: ";
            cin >> n;
        } while (n < low || n > high);
        return n;
    }

    int getYear () {
        int n;
        int low = 2000, high = 2099;
        do {
            cout << "Nhap so nam trong khoang [" << low << ", " << high << "]: ";
            cin >> n;
        } while (n < low || n > high);
        return n;
    }
} getData;

/* This is end of declaration*/
/*---------------------------------------------------------*/

// Hàm kiểm tra năm nhuận
bool isLeapYear (int year) {
    return (year % 4 == 0 && year % 100 != 0) || (year % 400 == 0);
}

// Hàm kiểm tra tính hợp lệ của ngày tháng năm
bool isValidDate (int day, int month, int year) {
    if (month < 1 || month > 12) return 0;
    int daysInMonth = numDaysInMonth[month];
    if (month == 2 && isLeapYear(year)) daysInMonth++;
    return day >= 1 && day <= daysInMonth;
}

// Hàm tính số ngày giữa hai thời điểm
int countDays (Time t1, Time t2) {
    int total_days = 0;
    for(int i=t1.year; i<t2.year; i++) total_days += (isLeapYear(i) ? 366 : 365);
    for(int m=1; m<t2.month; m++) {
        total_days += numDaysInMonth[m];
        if (m == 2 && isLeapYear(t2.year)) total_days++;
    }
    total_days += t2.day;

    for(int m=1; m<t1.month; m++) {
        total_days -= numDaysInMonth[m];
        if (m == 2 && isLeapYear(t1.year)) total_days--;
    }
    total_days -= t1.day;

    return total_days;
}

// Hàm sắp xếp thời gian theo thứ tự tăng dần (t1 trước t2)
bool timeSort (Time& t1, Time& t2) {
    if (t1.year != t2.year) {
        if (t1.year > t2.year) {
            swap(t1.day, t2.day);
            swap(t1.month, t2.month);
            swap(t1.year, t2.year);
        }
    } else {
        if (t1.month != t2.month) {
            if (t1.month > t2.month) {
                swap(t1.day, t2.day);
                swap(t1.month, t2.month);
            }
        } else {
            if (t1.day > t2.day) swap(t1.day, t2.day);
        }
    }
}

// Hàm tính ngày trong tuần của một thời điểm dựa trên thời điểm gốc
int getDayOfWeek (Time root, Time t) {
    // get Day of week of a time base on root time
    int total_days = countDays(root, t);
    return (total_days % 7 + 1) % 7;
}

int main () {
    Time time_1, time_2;
    // get input
    do {
        cout << "*NHAP THOI DIEM T1*" << endl;
        time_1.day = getData.getDay();
        time_1.month = getData.getMonth();
        time_1.year = getData.getYear();
    } while (!isValidDate(time_1.day, time_1.month, time_1.year));

    cout << endl;

    do {
        cout << "*NHAP THOI DIEM T2*" << endl;
        time_2.day = getData.getDay();
        time_2.month = getData.getMonth();
        time_2.year = getData.getYear();
    } while (!isValidDate(time_2.day, time_2.month, time_2.year));

    // (a) Tinh so ngay giua T1 va T2 va in ra thu cua T1 va T2
    timeSort(time_1, time_2);
    int total_days = countDays(time_1, time_2);
    cout << "So ngay giua " << time_1.day << "/" << time_1.month << "/" << time_1.year << " va " << time_2.day << "/" << time_2.month << "/" << time_2.year << ": " << total_days << " ngay\n";

    time_1.dayOfWeek = getDayOfWeek(root_time, time_1);
    time_2.dayOfWeek = getDayOfWeek(root_time, time_2);
    if (timeSort(time_1, time_2)) swap(time_1, time_2); // dam bao 2 thoi diem khong bi doi cho
    cout << "Neu " << root_time.day << "/" << root_time.month << "/" << root_time.year << " la " << DayName[root_time.dayOfWeek] << ": " << endl;
    cout << time_1.day << "/" << time_1.month << "/" << time_1.year << " la: " << DayName[time_1.dayOfWeek] << endl;
    cout << time_2.day << "/" << time_2.month << "/" << time_2.year << " la: " << DayName[time_2.dayOfWeek] << endl;

    return 0;
}   
```
- Với ý (d):
```c++
#include <bits/stdc++.h>
using namespace std;

#define JUDGE(name) if (fopen(name".inp", "r")) { freopen(name".inp","r",stdin); freopen(name".out","w",stdout); }
const int MAXN = 1e5+5;

/* This is the declaration of constants */
const int numDaysInMonth[] = {-1, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
const string DayName[] = {"Thu bay", "Chu Nhat", "Thu Hai", "Thu Ba", "Thu Tu", "Thu Nam", "Thu Sau"};
/*
    0 : "Saturday",
    1 : "Sunday",
    2 : "Monday",
    3 : "Tuesday",
    4 : "Wednesday",
    5 : "Thursday",
    6 : "Friday",
*/

/* This is the definition of the Time structure */
struct Time {
    int day, month, year, dayOfWeek;
};

struct input {
    int getDay () {
        int n;
        int low = 1, high = 31;
        do {
            cout << "Nhap so ngay trong khoang [" << low << ", " << high << "]: ";
            cin >> n;
        } while (n < low || n > high);
        return n;
    }

    int getMonth () {
        int n;
        int low = 1, high = 12;
        do {
            cout << "Nhap so thang trong khoang [" << low << ", " << high << "]: ";
            cin >> n;
        } while (n < low || n > high);
        return n;
    }

    int getYear () {
        int n;
        int low = 2000, high = 2099;
        do {
            cout << "Nhap so nam trong khoang [" << low << ", " << high << "]: ";
            cin >> n;
        } while (n < low || n > high);
        return n;
    }
} getData;

/* This is the definition of the getCurrentTime function */
Time getCurrentTime() {
    time_t now = time(nullptr);       // get current time
    tm *ltm = localtime(&now);        // convert to local time

    Time currentTime;
    currentTime.day = ltm->tm_mday;
    currentTime.month = ltm->tm_mon + 1;                // months since January (0–11)
    currentTime.year = ltm->tm_year + 1900;             // years since 1900

    return currentTime;
}
/* This is end of declaration*/
/*---------------------------------------------------------*/

// Hàm kiểm tra năm nhuận
bool isLeapYear (int year) {
    return (year % 4 == 0 && year % 100 != 0) || (year % 400 == 0);
}

// Hàm kiểm tra tính hợp lệ của ngày tháng năm
bool isValidDate (int day, int month, int year) {
    if (month < 1 || month > 12) return 0;
    int daysInMonth = numDaysInMonth[month];
    if (month == 2 && isLeapYear(year)) daysInMonth++;
    return day >= 1 && day <= daysInMonth;
}

// Hàm tính số ngày giữa hai thời điểm
int countDays (Time t1, Time t2) {
    int total_days = 0;
    for(int i=t1.year; i<t2.year; i++) total_days += (isLeapYear(i) ? 366 : 365);
    for(int m=1; m<t2.month; m++) {
        total_days += numDaysInMonth[m];
        if (m == 2 && isLeapYear(t2.year)) total_days++;
    }
    total_days += t2.day;

    for(int m=1; m<t1.month; m++) {
        total_days -= numDaysInMonth[m];
        if (m == 2 && isLeapYear(t1.year)) total_days--;
    }
    total_days -= t1.day;

    return total_days;
}

// Hàm sắp xếp thời gian theo thứ tự tăng dần (t1 trước t2)
bool timeSort (Time& t1, Time& t2) {
    if (t1.year != t2.year) {
        if (t1.year > t2.year) {
            swap(t1.day, t2.day);
            swap(t1.month, t2.month);
            swap(t1.year, t2.year);
        }
    } else {
        if (t1.month != t2.month) {
            if (t1.month > t2.month) {
                swap(t1.day, t2.day);
                swap(t1.month, t2.month);
            }
        } else {
            if (t1.day > t2.day) swap(t1.day, t2.day);
        }
    }
}

// Hàm tính ngày trong tuần của một thời điểm dựa trên thời điểm gốc
int getDayOfWeek (Time root, Time t) {
    // get Day of week of a time base on root time
    int total_days = countDays(root, t);
    return (total_days % 7 + 1) % 7;
}

// Hàm tính ngày trong tuần của một thời điểm dựa trên thuật toán Zeller's Congruence
int getDate (Time t) {
    // Zeller's Congruence Algorithm
    int d = t.day;
    int m = t.month;
    int y = t.year;

    if (m < 3) {
        m += 12;
        y--;
    }

    int K = y % 100;      // year of the century
    int J = y / 100;      // zero-based century

    int h = (d + (13 * (m + 1)) / 5 + K + K/4 + J/4 + 5*J) % 7;
    return h;
}

int main () {
    Time root_time, time_2;
    root_time = getCurrentTime();
    do {
        cout << "*NHAP THOI DIEM T2*" << endl;
        time_2.day = getData.getDay();
        time_2.month = getData.getMonth();
        time_2.year = getData.getYear();
    } while (!isValidDate(time_2.day, time_2.month, time_2.year));

    int root_day = getDate(root_time);
    int find_day = getDayOfWeek(root_time, time_2);
    cout << "Neu " << root_time.day << "/" << root_time.month << "/" << root_time.year << " la " << DayName[root_day] << ", thi "
         << time_2.day << "/" << time_2.month << "/" << time_2.year << " la " << DayName[find_day] << "." << endl;

    return 0;
}   
```
